import{d as ue,a7 as w,aZ as rt,b5 as be,bv as ot,bw as it,b4 as me,b7 as De,bx as Re,by as Te,bz as st,bA as ut,bi as He,f as k,ac as Le,af as te,bj as ke,bB as dt,bm as ct,bn as ft,bC as mt,h as Ye,a_ as vt,bD as gt,aa as ht,E as Ge,bE as pt,bF as bt,bG as kt,bH as yt,bI as It,x as ne,bh as xt,bg as _t,ah as St,bl as Ct,bJ as K,bK as Nt,aU as wt,bL as Me,bM as Pe,bN as Rt,bq as J,aj as Tt,aX as Ve,D as Ke,n as ve,o as A,w as s,a as u,u as n,F as Et,B as ge,c as ae,p as he,G as Ee,S as Ot,T as Dt,K as Lt,L as Be,P as We,b as se,J as W,M as pe,m as q,k as Mt,V as Pt,X as Vt,bt as Ce,aF as Bt,Y as At,_ as Ft,aB as ye,br as Q,g as zt,$ as Ae,y as Ut,a0 as $t,a1 as jt,aE as Ht,t as Yt,A as ee,a5 as Gt,Q as Kt,U as Wt,a2 as qt,a6 as Xt,s as Fe,a9 as Zt,a8 as ze}from"./index-C97z5PQV.js";import{N as Jt}from"./ButtonGroup-crtXYHAe.js";import{N as Qt}from"./Badge-Dj7OGGqR.js";import{N as en}from"./Divider-BH6C9D5v.js";const tn=ue({name:"Remove",render(){return w("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},w("line",{x1:"400",y1:"256",x2:"112",y2:"256",style:`
        fill: none;
        stroke: currentColor;
        stroke-linecap: round;
        stroke-linejoin: round;
        stroke-width: 32px;
      `}))}}),nn=rt("n-avatar-group"),an=be("avatar",`
 width: var(--n-merged-size);
 height: var(--n-merged-size);
 color: #FFF;
 font-size: var(--n-font-size);
 display: inline-flex;
 position: relative;
 overflow: hidden;
 text-align: center;
 border: var(--n-border);
 border-radius: var(--n-border-radius);
 --n-merged-color: var(--n-color);
 background-color: var(--n-merged-color);
 transition:
 border-color .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
`,[ot(me("&","--n-merged-color: var(--n-color-modal);")),it(me("&","--n-merged-color: var(--n-color-popover);")),me("img",`
 width: 100%;
 height: 100%;
 `),De("text",`
 white-space: nowrap;
 display: inline-block;
 position: absolute;
 left: 50%;
 top: 50%;
 `),be("icon",`
 vertical-align: bottom;
 font-size: calc(var(--n-merged-size) - 6px);
 `),De("text","line-height: 1.25")]),ln=Object.assign(Object.assign({},ke.props),{size:[String,Number],src:String,circle:{type:Boolean,default:void 0},objectFit:String,round:{type:Boolean,default:void 0},bordered:{type:Boolean,default:void 0},onError:Function,fallbackSrc:String,intersectionObserverOptions:Object,lazy:Boolean,onLoad:Function,renderPlaceholder:Function,renderFallback:Function,imgProps:Object,color:String}),rn=ue({name:"Avatar",props:ln,slots:Object,setup(e){const{mergedClsPrefixRef:f,inlineThemeDisabled:p}=He(e),E=k(!1);let v=null;const m=k(null),_=k(null),R=()=>{const{value:o}=m;if(o&&(v===null||v!==o.innerHTML)){v=o.innerHTML;const{value:g}=_;if(g){const{offsetWidth:y,offsetHeight:L}=g,{offsetWidth:T,offsetHeight:P}=o,M=.9,N=Math.min(y/T*M,L/P*M,1);o.style.transform=`translateX(-50%) translateY(-50%) scale(${N})`}}},b=Le(nn,null),D=te(()=>{const{size:o}=e;if(o)return o;const{size:g}=b||{};return g||"medium"}),r=ke("Avatar","-avatar",an,dt,e,f),O=Le(pt,null),C=te(()=>{if(b)return!0;const{round:o,circle:g}=e;return o!==void 0||g!==void 0?o||g:O?O.roundRef.value:!1}),a=te(()=>b?!0:e.bordered||!1),X=te(()=>{const o=D.value,g=C.value,y=a.value,{color:L}=e,{self:{borderRadius:T,fontSize:P,color:M,border:N,colorModal:le,colorPopover:H},common:{cubicBezierEaseInOut:Y}}=r.value;let G;return typeof o=="number"?G=`${o}px`:G=r.value.self[ct("height",o)],{"--n-font-size":P,"--n-border":y?N:"none","--n-border-radius":g?"50%":T,"--n-color":L||M,"--n-color-modal":L||le,"--n-color-popover":L||H,"--n-bezier":Y,"--n-merged-size":`var(--n-avatar-size-override, ${G})`}}),S=p?ft("avatar",te(()=>{const o=D.value,g=C.value,y=a.value,{color:L}=e;let T="";return o&&(typeof o=="number"?T+=`a${o}`:T+=o[0]),g&&(T+="b"),y&&(T+="c"),L&&(T+=mt(L)),T}),X,e):void 0,I=k(!e.lazy);Ye(()=>{if(e.lazy&&e.intersectionObserverOptions){let o;const g=vt(()=>{o==null||o(),o=void 0,e.lazy&&(o=gt(_.value,e.intersectionObserverOptions,I))});ht(()=>{g(),o==null||o()})}}),Ge(()=>{var o;return e.src||((o=e.imgProps)===null||o===void 0?void 0:o.src)},()=>{E.value=!1});const $=k(!e.lazy);return{textRef:m,selfRef:_,mergedRoundRef:C,mergedClsPrefix:f,fitTextTransform:R,cssVars:p?void 0:X,themeClass:S==null?void 0:S.themeClass,onRender:S==null?void 0:S.onRender,hasLoadError:E,shouldStartLoading:I,loaded:$,mergedOnError:o=>{if(!I.value)return;E.value=!0;const{onError:g,imgProps:{onError:y}={}}=e;g==null||g(o),y==null||y(o)},mergedOnLoad:o=>{const{onLoad:g,imgProps:{onLoad:y}={}}=e;g==null||g(o),y==null||y(o),$.value=!0}}},render(){var e,f;const{$slots:p,src:E,mergedClsPrefix:v,lazy:m,onRender:_,loaded:R,hasLoadError:b,imgProps:D={}}=this;_==null||_();let r;const O=!R&&!b&&(this.renderPlaceholder?this.renderPlaceholder():(f=(e=this.$slots).placeholder)===null||f===void 0?void 0:f.call(e));return this.hasLoadError?r=this.renderFallback?this.renderFallback():Re(p.fallback,()=>[w("img",{src:this.fallbackSrc,style:{objectFit:this.objectFit}})]):r=Te(p.default,C=>{if(C)return w(st,{onResize:this.fitTextTransform},{default:()=>w("span",{ref:"textRef",class:`${v}-avatar__text`},C)});if(E||D.src){const a=this.src||D.src;return w("img",Object.assign(Object.assign({},D),{loading:ut&&!this.intersectionObserverOptions&&m?"lazy":"eager",src:m&&this.intersectionObserverOptions?this.shouldStartLoading?a:void 0:a,"data-image-src":a,onLoad:this.mergedOnLoad,onError:this.mergedOnError,style:[D.style||"",{objectFit:this.objectFit},O?{height:"0",width:"0",visibility:"hidden",position:"absolute"}:""]}))}}),w("span",{ref:"selfRef",class:[`${v}-avatar`,this.themeClass],style:this.cssVars},r,m&&O)}});function on(e){const{textColorDisabled:f}=e;return{iconColorDisabled:f}}const sn=bt({name:"InputNumber",common:It,peers:{Button:yt,Input:kt},self:on}),un=me([be("input-number-suffix",`
 display: inline-block;
 margin-right: 10px;
 `),be("input-number-prefix",`
 display: inline-block;
 margin-left: 10px;
 `)]);function dn(e){return e==null||typeof e=="string"&&e.trim()===""?null:Number(e)}function cn(e){return e.includes(".")&&(/^(-)?\d+.*(\.|0)$/.test(e)||/^-?\d*$/.test(e))||e==="-"||e==="-0"}function Ne(e){return e==null?!0:!Number.isNaN(e)}function Ue(e,f){return typeof e!="number"?"":f===void 0?String(e):e.toFixed(f)}function we(e){if(e===null)return null;if(typeof e=="number")return e;{const f=Number(e);return Number.isNaN(f)?null:f}}const $e=800,je=100,fn=Object.assign(Object.assign({},ke.props),{autofocus:Boolean,loading:{type:Boolean,default:void 0},placeholder:String,defaultValue:{type:Number,default:null},value:Number,step:{type:[Number,String],default:1},min:[Number,String],max:[Number,String],size:String,disabled:{type:Boolean,default:void 0},validator:Function,bordered:{type:Boolean,default:void 0},showButton:{type:Boolean,default:!0},buttonPlacement:{type:String,default:"right"},inputProps:Object,readonly:Boolean,clearable:Boolean,keyboard:{type:Object,default:{}},updateValueOnInput:{type:Boolean,default:!0},round:{type:Boolean,default:void 0},parse:Function,format:Function,precision:Number,status:String,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onFocus:[Function,Array],onBlur:[Function,Array],onClear:[Function,Array],onChange:[Function,Array]}),mn=ue({name:"InputNumber",props:fn,slots:Object,setup(e){const{mergedBorderedRef:f,mergedClsPrefixRef:p,mergedRtlRef:E}=He(e),v=ke("InputNumber","-input-number",un,sn,e,p),{localeRef:m}=xt("InputNumber"),_=_t(e),{mergedSizeRef:R,mergedDisabledRef:b,mergedStatusRef:D}=_,r=k(null),O=k(null),C=k(null),a=k(e.defaultValue),X=St(e,"value"),S=Ct(X,a),I=k(""),$=t=>{const l=String(t).split(".")[1];return l?l.length:0},o=t=>{const l=[e.min,e.max,e.step,t].map(c=>c===void 0?0:$(c));return Math.max(...l)},g=K(()=>{const{placeholder:t}=e;return t!==void 0?t:m.value.placeholder}),y=K(()=>{const t=we(e.step);return t!==null?t===0?1:Math.abs(t):1}),L=K(()=>{const t=we(e.min);return t!==null?t:null}),T=K(()=>{const t=we(e.max);return t!==null?t:null}),P=()=>{const{value:t}=S;if(Ne(t)){const{format:l,precision:c}=e;l?I.value=l(t):t===null||c===void 0||$(t)>c?I.value=Ue(t,void 0):I.value=Ue(t,c)}else I.value=String(t)};P();const M=t=>{const{value:l}=S;if(t===l){P();return}const{"onUpdate:value":c,onUpdateValue:x,onChange:V}=e,{nTriggerFormInput:U,nTriggerFormChange:Z}=_;V&&J(V,t),x&&J(x,t),c&&J(c,t),a.value=t,U(),Z()},N=({offset:t,doUpdateIfValid:l,fixPrecision:c,isInputing:x})=>{const{value:V}=I;if(x&&cn(V))return!1;const U=(e.parse||dn)(V);if(U===null)return l&&M(null),null;if(Ne(U)){const Z=$(U),{precision:ie}=e;if(ie!==void 0&&ie<Z&&!c)return!1;let j=Number.parseFloat((U+t).toFixed(ie??o(U)));if(Ne(j)){const{value:_e}=T,{value:Se}=L;if(_e!==null&&j>_e){if(!l||x)return!1;j=_e}if(Se!==null&&j<Se){if(!l||x)return!1;j=Se}return e.validator&&!e.validator(j)?!1:(l&&M(j),j)}}return!1},le=K(()=>N({offset:0,doUpdateIfValid:!1,isInputing:!1,fixPrecision:!1})===!1),H=K(()=>{const{value:t}=S;if(e.validator&&t===null)return!1;const{value:l}=y;return N({offset:-l,doUpdateIfValid:!1,isInputing:!1,fixPrecision:!1})!==!1}),Y=K(()=>{const{value:t}=S;if(e.validator&&t===null)return!1;const{value:l}=y;return N({offset:+l,doUpdateIfValid:!1,isInputing:!1,fixPrecision:!1})!==!1});function G(t){const{onFocus:l}=e,{nTriggerFormFocus:c}=_;l&&J(l,t),c()}function i(t){var l,c;if(t.target===((l=r.value)===null||l===void 0?void 0:l.wrapperElRef))return;const x=N({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0});if(x!==!1){const Z=(c=r.value)===null||c===void 0?void 0:c.inputElRef;Z&&(Z.value=String(x||"")),S.value===x&&P()}else P();const{onBlur:V}=e,{nTriggerFormBlur:U}=_;V&&J(V,t),U(),Tt(()=>{P()})}function d(t){const{onClear:l}=e;l&&J(l,t)}function F(){const{value:t}=Y;if(!t){xe();return}const{value:l}=S;if(l===null)e.validator||M(Oe());else{const{value:c}=y;N({offset:c,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})}}function z(){const{value:t}=H;if(!t){Ie();return}const{value:l}=S;if(l===null)e.validator||M(Oe());else{const{value:c}=y;N({offset:-c,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})}}const h=G,de=i;function Oe(){if(e.validator)return null;const{value:t}=L,{value:l}=T;return t!==null?Math.max(0,t):l!==null?Math.min(0,l):0}function qe(t){d(t),M(null)}function Xe(t){var l,c,x;!((l=C.value)===null||l===void 0)&&l.$el.contains(t.target)&&t.preventDefault(),!((c=O.value)===null||c===void 0)&&c.$el.contains(t.target)&&t.preventDefault(),(x=r.value)===null||x===void 0||x.activate()}let re=null,oe=null,ce=null;function Ie(){ce&&(window.clearTimeout(ce),ce=null),re&&(window.clearInterval(re),re=null)}let fe=null;function xe(){fe&&(window.clearTimeout(fe),fe=null),oe&&(window.clearInterval(oe),oe=null)}function Ze(){Ie(),ce=window.setTimeout(()=>{re=window.setInterval(()=>{z()},je)},$e),Ve("mouseup",document,Ie,{once:!0})}function Je(){xe(),fe=window.setTimeout(()=>{oe=window.setInterval(()=>{F()},je)},$e),Ve("mouseup",document,xe,{once:!0})}const Qe=()=>{oe||F()},et=()=>{re||z()};function tt(t){var l,c;if(t.key==="Enter"){if(t.target===((l=r.value)===null||l===void 0?void 0:l.wrapperElRef))return;N({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})!==!1&&((c=r.value)===null||c===void 0||c.deactivate())}else if(t.key==="ArrowUp"){if(!Y.value||e.keyboard.ArrowUp===!1)return;t.preventDefault(),N({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})!==!1&&F()}else if(t.key==="ArrowDown"){if(!H.value||e.keyboard.ArrowDown===!1)return;t.preventDefault(),N({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})!==!1&&z()}}function nt(t){I.value=t,e.updateValueOnInput&&!e.format&&!e.parse&&e.precision===void 0&&N({offset:0,doUpdateIfValid:!0,isInputing:!0,fixPrecision:!1})}Ge(S,()=>{P()});const at={focus:()=>{var t;return(t=r.value)===null||t===void 0?void 0:t.focus()},blur:()=>{var t;return(t=r.value)===null||t===void 0?void 0:t.blur()},select:()=>{var t;return(t=r.value)===null||t===void 0?void 0:t.select()}},lt=Nt("InputNumber",E,p);return Object.assign(Object.assign({},at),{rtlEnabled:lt,inputInstRef:r,minusButtonInstRef:O,addButtonInstRef:C,mergedClsPrefix:p,mergedBordered:f,uncontrolledValue:a,mergedValue:S,mergedPlaceholder:g,displayedValueInvalid:le,mergedSize:R,mergedDisabled:b,displayedValue:I,addable:Y,minusable:H,mergedStatus:D,handleFocus:h,handleBlur:de,handleClear:qe,handleMouseDown:Xe,handleAddClick:Qe,handleMinusClick:et,handleAddMousedown:Je,handleMinusMousedown:Ze,handleKeyDown:tt,handleUpdateDisplayedValue:nt,mergedTheme:v,inputThemeOverrides:{paddingSmall:"0 8px 0 10px",paddingMedium:"0 8px 0 12px",paddingLarge:"0 8px 0 14px"},buttonThemeOverrides:te(()=>{const{self:{iconColorDisabled:t}}=v.value,[l,c,x,V]=wt(t);return{textColorTextDisabled:`rgb(${l}, ${c}, ${x})`,opacityDisabled:`${V}`}})})},render(){const{mergedClsPrefix:e,$slots:f}=this,p=()=>w(Me,{text:!0,disabled:!this.minusable||this.mergedDisabled||this.readonly,focusable:!1,theme:this.mergedTheme.peers.Button,themeOverrides:this.mergedTheme.peerOverrides.Button,builtinThemeOverrides:this.buttonThemeOverrides,onClick:this.handleMinusClick,onMousedown:this.handleMinusMousedown,ref:"minusButtonInstRef"},{icon:()=>Re(f["minus-icon"],()=>[w(Pe,{clsPrefix:e},{default:()=>w(tn,null)})])}),E=()=>w(Me,{text:!0,disabled:!this.addable||this.mergedDisabled||this.readonly,focusable:!1,theme:this.mergedTheme.peers.Button,themeOverrides:this.mergedTheme.peerOverrides.Button,builtinThemeOverrides:this.buttonThemeOverrides,onClick:this.handleAddClick,onMousedown:this.handleAddMousedown,ref:"addButtonInstRef"},{icon:()=>Re(f["add-icon"],()=>[w(Pe,{clsPrefix:e},{default:()=>w(Rt,null)})])});return w("div",{class:[`${e}-input-number`,this.rtlEnabled&&`${e}-input-number--rtl`]},w(ne,{ref:"inputInstRef",autofocus:this.autofocus,status:this.mergedStatus,bordered:this.mergedBordered,loading:this.loading,value:this.displayedValue,onUpdateValue:this.handleUpdateDisplayedValue,theme:this.mergedTheme.peers.Input,themeOverrides:this.mergedTheme.peerOverrides.Input,builtinThemeOverrides:this.inputThemeOverrides,size:this.mergedSize,placeholder:this.mergedPlaceholder,disabled:this.mergedDisabled,readonly:this.readonly,round:this.round,textDecoration:this.displayedValueInvalid?"line-through":void 0,onFocus:this.handleFocus,onBlur:this.handleBlur,onKeydown:this.handleKeyDown,onMousedown:this.handleMouseDown,onClear:this.handleClear,clearable:this.clearable,inputProps:this.inputProps,internalLoadingBeforeSuffix:!0},{prefix:()=>{var v;return this.showButton&&this.buttonPlacement==="both"?[p(),Te(f.prefix,m=>m?w("span",{class:`${e}-input-number-prefix`},m):null)]:(v=f.prefix)===null||v===void 0?void 0:v.call(f)},suffix:()=>{var v;return this.showButton?[Te(f.suffix,m=>m?w("span",{class:`${e}-input-number-suffix`},m):null),this.buttonPlacement==="right"?p():null,E()]:(v=f.suffix)===null||v===void 0?void 0:v.call(f)}}))}}),vn={class:"link-time-div"},gn={key:0},hn={key:0},pn=ue({__name:"LinkListItem",props:{link:{},isChecked:{type:Boolean}},emits:["onSettingLink","onDeleteLink","onChecked","onUnChecked"],setup(e,{emit:f}){const p=Ke(),E=e,v=f,m=k(!1),_=r=>{v("onSettingLink",r)},R=r=>{v("onDeleteLink",r)},b=()=>{m.value||(m.value=!0,setTimeout(()=>{m.value=!1},500))},D=r=>{v(r?"onChecked":"onUnChecked",E.link)};return(r,O)=>(A(),ve(n(At),null,{default:s(()=>[u(n(Et),{class:"animate__animated animate__fadeIn"},{avatar:s(()=>[u(n(Vt),{checked:r.isChecked,style:{"margin-left":"-4px","margin-right":"12px"},onUpdateChecked:D},null,8,["checked"]),u(n(Qt),{value:r.link.priority,class:Ce(["animate__animated none-select",{animate__pulse:m.value}]),style:{"margin-right":"5px"}},{default:s(()=>[q("div",{onMouseenter:b},[r.link.logo!==null?(A(),ve(n(rn),{key:0,class:"shadow",src:n(Bt)(r.link.logo),circle:"",size:"large"},{fallback:s(()=>[q("div",{class:Ce(["avatar-text-div shadow",{animate__pulse:m.value}])},[q("span",null,W(r.link.displayName[0]),1)],2)]),_:1},8,["src"])):(A(),ae("div",{key:1,class:Ce(["avatar-text-div shadow",{animate__pulse:m.value}])},[q("span",null,W(r.link.displayName[0]),1)],2))],32)]),_:1},8,["value","class"])]),header:s(()=>[u(n(Pt),{trigger:"hover"},{trigger:s(()=>[u(n(pe),{strong:"",style:{cursor:"default"}},{default:s(()=>[se(W(r.link.displayName),1)]),_:1})]),default:s(()=>[q("span",null,"备注："+W(r.link.remark??"无"),1)]),_:1})]),description:s(()=>[u(n(Lt),null,{default:s(()=>[u(n(Be),{span:n(p).isSmallWindow?24:18},{default:s(()=>[u(n(We),{vertical:"",size:"small",style:{"margin-top":"-8px"}},{default:s(()=>[u(n(ge),{text:"",tag:"a",href:r.link.url,target:"_blank",type:"primary"},{default:s(()=>[se(W(r.link.url),1)]),_:1},8,["href"]),u(n(pe),{depth:"3"},{default:s(()=>[se(W(r.link.description),1)]),_:1})]),_:1})]),_:1},8,["span"]),n(p).isSmallWindow?he("",!0):(A(),ve(n(Be),{key:0,span:6},{default:s(()=>[q("div",vn,[u(n(pe),{class:"link-time-div-text",depth:"3",style:{"font-size":"0.9em"}},{default:s(()=>[se(W(n(Mt)(r.link.createTime)),1)]),_:1})])]),_:1}))]),_:1})]),"header-extra":s(()=>[u(n(Jt),{size:"small"},{default:s(()=>[u(n(ge),{type:"default",tertiary:"",onClick:O[0]||(O[0]=C=>_(r.link))},{icon:s(()=>[u(n(Ee),null,{default:s(()=>[u(n(Ot))]),_:1})]),default:s(()=>[n(p).isSmallWindow?he("",!0):(A(),ae("span",gn,"设置"))]),_:1}),u(n(ge),{type:"error",tertiary:"",onClick:O[1]||(O[1]=C=>R(r.link))},{icon:s(()=>[u(n(Ee),null,{default:s(()=>[u(n(Dt))]),_:1})]),default:s(()=>[n(p).isSmallWindow?he("",!0):(A(),ae("span",hn,"删除"))]),_:1})]),_:1})]),_:1})]),_:1}))}}),bn=Ft(pn,[["__scopeId","data-v-886ac5df"]]);var B=(e=>(e.PRIORITY_DESC="PRIORITY_DESC",e.PRIORITY_ASC="PRIORITY_ASC",e.CREATE_TIME_DESC="CREATE_TIME_DESC",e.CREATE_TIME_ASC="CREATE_TIME_ASC",e.MODIFY_TIME_DESC="MODIFY_TIME_DESC",e.MODIFY_TIME_ASC="MODIFY_TIME_ASC",e))(B||{});function kn(e){return ye({url:"/admin/link",method:"POST",data:e})}function yn(e){return ye({url:"/admin/link",method:"DELETE",data:e})}function In(e){return ye({url:"/admin/link",method:"PUT",data:e})}function xn(e=0,f=0,p=B.PRIORITY_DESC){return ye({url:`/admin/link?page=${e}&size=${f}&sort=${p}`,method:"GET"})}const _n={class:"container"},Sn={key:0},Tn=ue({__name:"LinkView",setup(e){const f=Ke(),p=k(0),E=k(0),v=k(1),m=k(10),_=k(B.PRIORITY_DESC),R=k(null),b=k(Array()),D=k(null),r=k(!1),O=k(!1),C=k(Q.ADD),a=zt({linkId:-1,displayName:"",url:"",logo:"",description:"",priority:0,remark:"",isLost:!1,createTime:0,lastModifyTime:null}),X=[{label:"优先级降序",value:B.PRIORITY_DESC},{label:"优先级升序",value:B.PRIORITY_ASC},{label:"创建时间降序",value:B.CREATE_TIME_DESC},{label:"创建时间升序",value:B.CREATE_TIME_ASC},{label:"修改时间降序",value:B.MODIFY_TIME_DESC},{label:"修改时间升序",value:B.MODIFY_TIME_ASC}];Ye(()=>{S(),I()});const S=()=>{let i=Number(localStorage.getItem(Ae.LINK_PAGE_SIZE.toString())??10);isNaN(i)||i<10||i>120?m.value=10:m.value=i},I=()=>{window.$loadingBar.start(),xn(v.value,m.value,_.value??B.PRIORITY_DESC).then(i=>{window.$loadingBar.finish();let d=i.data;v.value=d.page,m.value=d.size,p.value=d.totalData,E.value=d.totalPages,R.value=d.data}).catch(()=>{window.$loadingBar.error()})},$=i=>{v.value=i,I()},o=i=>{m.value=i,localStorage.setItem(Ae.LINK_PAGE_SIZE.toString(),i.toString()),I()},g=()=>{M(),C.value=Q.ADD,r.value=!0},y=i=>{ze(`确定要删除链接 [${i.displayName}] 吗？`,()=>{T([i.linkId])})},L=()=>{let i=Array();b.value.forEach(d=>{i.push(d)}),ze(`确定要删除选择的 ${i.length} 个链接吗？`,()=>{T(i)})},T=i=>{yn(i).then(()=>{b.value=b.value.filter(d=>!i.includes(d)),Fe("删除成功"),I()}).catch(()=>{})},P=i=>{M(),C.value=Q.EDIT,a.linkId=i.linkId,a.displayName=i.displayName,a.url=i.url,a.logo=i.logo,a.description=i.description,a.priority=i.priority,a.remark=i.remark,r.value=!0},M=()=>{a.linkId=-1,a.displayName="",a.url="",a.logo="",a.description="",a.priority=0,a.remark="",a.createTime=0,a.lastModifyTime=null},N=()=>{var i;return(i=D.value)==null||i.validate(d=>{var F,z,h;if(!d){let de={linkId:a.linkId,displayName:a.displayName,url:a.url,logo:((F=a.logo)==null?void 0:F.length)===0?null:a.logo,description:((z=a.description)==null?void 0:z.length)===0?null:a.description,priority:a.priority,remark:((h=a.remark)==null?void 0:h.length)===0?null:a.remark,isLost:a.isLost};C.value===Q.ADD?kn(de).then(()=>{r.value=!1,Fe("添加成功"),I()}).catch(()=>{}):In(de).then(()=>{r.value=!1,Zt(),I()}).catch(()=>{})}}),!1},le=i=>{b.value.push(i.linkId)},H=i=>{b.value=b.value.filter(d=>d!==i.linkId)},Y=()=>{var i;b.value=[],(i=R.value)==null||i.forEach(d=>{b.value.push(d.linkId)})},G=()=>{b.value=[]};return(i,d)=>{var F,z;return A(),ae("div",_n,[u(n($t),{show:r.value,"onUpdate:show":d[6]||(d[6]=h=>r.value=h),preset:"dialog",title:C.value==n(Q).ADD?"添加链接":"链接设置","positive-text":C.value==n(Q).ADD?"添加":"保存","negative-text":"取消",loading:O.value,onPositiveClick:N,onKeydown:Ut(N,["enter"])},{default:s(()=>[u(n(Ht),{style:{"max-height":"55vh","padding-right":"12px"}},{default:s(()=>[u(n(Yt),{ref_key:"linkDialogRef",ref:D,class:"dialog-form",model:a,style:{margin:"10px 5px"}},{default:s(()=>[u(n(ee),{label:"链接名",path:"displayName",rule:{required:!0,message:"请输入链接名"}},{default:s(()=>[u(n(ne),{value:a.displayName,"onUpdate:value":d[0]||(d[0]=h=>a.displayName=h),placeholder:"链接名",maxlength:"100"},null,8,["value"])]),_:1}),u(n(ee),{label:"地址",path:"url",rule:{required:!0,message:"请输入链接地址"}},{default:s(()=>[u(n(ne),{value:a.url,"onUpdate:value":d[1]||(d[1]=h=>a.url=h),placeholder:"链接地址",maxlength:"256"},null,8,["value"])]),_:1}),u(n(ee),{label:"Logo",path:"logo"},{default:s(()=>[u(n(ne),{value:a.logo,"onUpdate:value":d[2]||(d[2]=h=>a.logo=h),placeholder:"链接 LOGO",maxlength:"256"},null,8,["value"])]),_:1}),u(n(ee),{label:"描述",path:"description"},{default:s(()=>[u(n(ne),{type:"textarea",value:a.description,"onUpdate:value":d[3]||(d[3]=h=>a.description=h),placeholder:"链接描述",maxlength:"400"},null,8,["value"])]),_:1}),u(n(en),null,{default:s(()=>[u(n(pe),{depth:"3",style:{"font-size":"0.9em"}},{default:s(()=>d[8]||(d[8]=[se("进阶设置")])),_:1})]),_:1}),u(n(ee),{label:"优先级（0 - 100）",path:"priority"},{default:s(()=>[u(n(mn),{style:{width:"100%"},value:a.priority,"onUpdate:value":d[4]||(d[4]=h=>a.priority=h),placeholder:"链接优先级（0 - 100）默认 0",clearable:"",max:100,min:0},null,8,["value"])]),_:1}),u(n(ee),{label:"备注（仅后台可见）",path:"remark"},{default:s(()=>[u(n(ne),{value:a.remark,"onUpdate:value":d[5]||(d[5]=h=>a.remark=h),placeholder:"链接备注",maxlength:"128"},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1},8,["show","title","positive-text","loading"]),u(jt,{"data-count":p.value,"show-empty-status":R.value!==null&&R.value.length===0,"current-page":v.value,"page-size":m.value,"page-count":E.value,"current-page-item-count":((F=R.value)==null?void 0:F.length)??0,"is-checked":b.value.length===((z=R.value)==null?void 0:z.length)&&R.value.length!==0,"show-pagination":"","show-checkbox":"","show-delete-button":b.value.length>0,"item-string":"链接",onOnPageUpdate:$,onOnPageSizeUpdate:o,onOnChecked:Y,onOnCheckboxCancel:G,onOnDeleteButtonClick:L},{"header-extra":s(()=>[u(n(We),null,{default:s(()=>[u(n(qt),{options:X,value:_.value,"onUpdate:value":[d[7]||(d[7]=h=>_.value=h),I],placeholder:"排序方式",style:{width:"130px"}},null,8,["value"]),u(n(ge),{type:"primary",onClick:g},{icon:s(()=>[u(n(Ee),null,{default:s(()=>[u(n(Xt))]),_:1})]),default:s(()=>[n(f).isSmallWindow?he("",!0):(A(),ae("span",Sn,"添加链接"))]),_:1})]),_:1})]),content:s(()=>[q("div",null,[u(n(Gt),{hoverable:""},{default:s(()=>[(A(!0),ae(Kt,null,Wt(R.value,h=>(A(),ve(bn,{key:h.linkId,link:h,"is-checked":b.value.includes(h.linkId),onOnDeleteLink:y,onOnSettingLink:P,onOnChecked:le,onOnUnChecked:H},null,8,["link","is-checked"]))),128))]),_:1})])]),_:1},8,["data-count","show-empty-status","current-page","page-size","page-count","current-page-item-count","is-checked","show-delete-button"])])}}});export{Tn as default};
