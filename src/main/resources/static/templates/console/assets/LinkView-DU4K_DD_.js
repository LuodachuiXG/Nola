import{d as re,W as _,aI as rt,a1 as ye,b9 as ot,aP as ge,ba as it,aR as Pe,aU as Ye,e as b,D as Ie,a6 as ne,a5 as xe,aW as st,g as Ge,aJ as ut,aa as dt,E as We,bb as De,bc as Oe,bd as ct,b6 as ft,be as mt,bf as vt,bg as gt,bh as ht,Z as pt,$ as bt,bi as kt,bj as yt,aT as It,aS as xt,ai as _t,aV as Ct,bk as W,bl as St,p as ae,aG as Le,aA as wt,bm as Ve,bn as Ae,b5 as Q,ad as Nt,o as B,k as he,w as i,a as s,u as n,b8 as Re,A as q,G as K,c as le,F as Rt,b as de,I as Tt,J as Be,M as Ke,N as pe,Q as Et,m as be,H as Me,T as Dt,_ as Ot,s as _e,f as Mt,S as Fe,i as ve,q as Pt,X as ze,j as $e,Y as Lt,x as Vt,v as ee,V as At,O as Bt,P as Ft}from"./index-BeAjLgC_.js";import{N as zt,a as $t,b as Ut,c as jt,_ as Ht,A as Yt,d as Gt}from"./MyCard.vue_vue_type_script_setup_true_lang-DGQyIiRj.js";import{t as Wt,N as ke,T as Kt,b as qt,a as Xt}from"./TrashOutline-DLK0KsOh.js";import{N as Zt}from"./Badge-Dfbpssef.js";import{D as te}from"./DialogFormMode-F5uswgu2.js";import{N as Jt}from"./Divider-DODEea0d.js";import"./Result-BUcOHWzf.js";const Qt=re({name:"Add",render(){return _("svg",{width:"512",height:"512",viewBox:"0 0 512 512",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_("path",{d:"M256 112V400M400 256H112",stroke:"currentColor","stroke-width":"32","stroke-linecap":"round","stroke-linejoin":"round"}))}}),en=re({name:"Remove",render(){return _("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},_("line",{x1:"400",y1:"256",x2:"112",y2:"256",style:`
        fill: none;
        stroke: currentColor;
        stroke-linecap: round;
        stroke-linejoin: round;
        stroke-width: 32px;
      `}))}}),tn=rt("n-avatar-group"),nn=ye("avatar",`
 width: var(--n-merged-size);
 height: var(--n-merged-size);
 color: #FFF;
 font-size: var(--n-font-size);
 display: inline-flex;
 position: relative;
 overflow: hidden;
 text-align: center;
 border: var(--n-border);
 border-radius: var(--n-border-radius);
 --n-merged-color: var(--n-color);
 background-color: var(--n-merged-color);
 transition:
 border-color .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
`,[ot(ge("&","--n-merged-color: var(--n-color-modal);")),it(ge("&","--n-merged-color: var(--n-color-popover);")),ge("img",`
 width: 100%;
 height: 100%;
 `),Pe("text",`
 white-space: nowrap;
 display: inline-block;
 position: absolute;
 left: 50%;
 top: 50%;
 `),ye("icon",`
 vertical-align: bottom;
 font-size: calc(var(--n-merged-size) - 6px);
 `),Pe("text","line-height: 1.25")]),an=Object.assign(Object.assign({},xe.props),{size:[String,Number],src:String,circle:{type:Boolean,default:void 0},objectFit:String,round:{type:Boolean,default:void 0},bordered:{type:Boolean,default:void 0},onError:Function,fallbackSrc:String,intersectionObserverOptions:Object,lazy:Boolean,onLoad:Function,renderPlaceholder:Function,renderFallback:Function,imgProps:Object,color:String}),ln=re({name:"Avatar",props:an,setup(e){const{mergedClsPrefixRef:f,inlineThemeDisabled:k}=Ye(e),N=b(!1);let m=null;const v=b(null),C=b(null),T=()=>{const{value:o}=v;if(o&&(m===null||m!==o.innerHTML)){m=o.innerHTML;const{value:g}=C;if(g){const{offsetWidth:y,offsetHeight:M}=g,{offsetWidth:E,offsetHeight:L}=o,w=.9,P=Math.min(y/E*w,M/L*w,1);o.style.transform=`translateX(-50%) translateY(-50%) scale(${P})`}}},p=Ie(tn,null),O=ne(()=>{const{size:o}=e;if(o)return o;const{size:g}=p||{};return g||"medium"}),r=xe("Avatar","-avatar",nn,ct,e,f),D=Ie(Wt,null),R=ne(()=>{if(p)return!0;const{round:o,circle:g}=e;return o!==void 0||g!==void 0?o||g:D?D.roundRef.value:!1}),a=ne(()=>p?!0:e.bordered||!1),X=ne(()=>{const o=O.value,g=R.value,y=a.value,{color:M}=e,{self:{borderRadius:E,fontSize:L,color:w,border:P,colorModal:oe,colorPopover:H},common:{cubicBezierEaseInOut:Y}}=r.value;let G;return typeof o=="number"?G=`${o}px`:G=r.value.self[ft("height",o)],{"--n-font-size":L,"--n-border":y?P:"none","--n-border-radius":g?"50%":E,"--n-color":M||w,"--n-color-modal":M||oe,"--n-color-popover":M||H,"--n-bezier":Y,"--n-merged-size":`var(--n-avatar-size-override, ${G})`}}),S=k?st("avatar",ne(()=>{const o=O.value,g=R.value,y=a.value,{color:M}=e;let E="";return o&&(typeof o=="number"?E+=`a${o}`:E+=o[0]),g&&(E+="b"),y&&(E+="c"),M&&(E+=mt(M)),E}),X,e):void 0,I=b(!e.lazy);Ge(()=>{if(e.lazy&&e.intersectionObserverOptions){let o;const g=ut(()=>{o==null||o(),o=void 0,e.lazy&&(o=vt(C.value,e.intersectionObserverOptions,I))});dt(()=>{g(),o==null||o()})}}),We(()=>{var o;return e.src||((o=e.imgProps)===null||o===void 0?void 0:o.src)},()=>{N.value=!1});const U=b(!e.lazy);return{textRef:v,selfRef:C,mergedRoundRef:R,mergedClsPrefix:f,fitTextTransform:T,cssVars:k?void 0:X,themeClass:S==null?void 0:S.themeClass,onRender:S==null?void 0:S.onRender,hasLoadError:N,shouldStartLoading:I,loaded:U,mergedOnError:o=>{if(!I.value)return;N.value=!0;const{onError:g,imgProps:{onError:y}={}}=e;g==null||g(o),y==null||y(o)},mergedOnLoad:o=>{const{onLoad:g,imgProps:{onLoad:y}={}}=e;g==null||g(o),y==null||y(o),U.value=!0}}},render(){var e,f;const{$slots:k,src:N,mergedClsPrefix:m,lazy:v,onRender:C,loaded:T,hasLoadError:p,imgProps:O={}}=this;C==null||C();let r;const D=!T&&!p&&(this.renderPlaceholder?this.renderPlaceholder():(f=(e=this.$slots).placeholder)===null||f===void 0?void 0:f.call(e));return this.hasLoadError?r=this.renderFallback?this.renderFallback():De(k.fallback,()=>[_("img",{src:this.fallbackSrc,style:{objectFit:this.objectFit}})]):r=Oe(k.default,R=>{if(R)return _(gt,{onResize:this.fitTextTransform},{default:()=>_("span",{ref:"textRef",class:`${m}-avatar__text`},R)});if(N||O.src){const a=this.src||O.src;return _("img",Object.assign(Object.assign({},O),{loading:ht&&!this.intersectionObserverOptions&&v?"lazy":"eager",src:v&&this.intersectionObserverOptions?this.shouldStartLoading?a:void 0:a,"data-image-src":a,onLoad:this.mergedOnLoad,onError:this.mergedOnError,style:[O.style||"",{objectFit:this.objectFit},D?{height:"0",width:"0",visibility:"hidden",position:"absolute"}:""]}))}}),_("span",{ref:"selfRef",class:[`${m}-avatar`,this.themeClass],style:this.cssVars},r,v&&D)}}),rn=e=>{const{textColorDisabled:f}=e;return{iconColorDisabled:f}},on=pt({name:"InputNumber",common:bt,peers:{Button:kt,Input:yt},self:rn}),sn=on;function un(e){return e==null||typeof e=="string"&&e.trim()===""?null:Number(e)}function dn(e){return e.includes(".")&&(/^(-)?\d+.*(\.|0)$/.test(e)||/^\.\d+$/.test(e))}function Te(e){return e==null?!0:!Number.isNaN(e)}function Ue(e,f){return e==null?"":f===void 0?String(e):e.toFixed(f)}function Ee(e){if(e===null)return null;if(typeof e=="number")return e;{const f=Number(e);return Number.isNaN(f)?null:f}}const cn=ge([ye("input-number-suffix",`
 display: inline-block;
 margin-right: 10px;
 `),ye("input-number-prefix",`
 display: inline-block;
 margin-left: 10px;
 `)]),je=800,He=100,fn=Object.assign(Object.assign({},xe.props),{autofocus:Boolean,loading:{type:Boolean,default:void 0},placeholder:String,defaultValue:{type:Number,default:null},value:Number,step:{type:[Number,String],default:1},min:[Number,String],max:[Number,String],size:String,disabled:{type:Boolean,default:void 0},validator:Function,bordered:{type:Boolean,default:void 0},showButton:{type:Boolean,default:!0},buttonPlacement:{type:String,default:"right"},inputProps:Object,readonly:Boolean,clearable:Boolean,keyboard:{type:Object,default:{}},updateValueOnInput:{type:Boolean,default:!0},parse:Function,format:Function,precision:Number,status:String,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onFocus:[Function,Array],onBlur:[Function,Array],onClear:[Function,Array],onChange:[Function,Array]}),mn=re({name:"InputNumber",props:fn,setup(e){const{mergedBorderedRef:f,mergedClsPrefixRef:k,mergedRtlRef:N}=Ye(e),m=xe("InputNumber","-input-number",cn,sn,e,k),{localeRef:v}=It("InputNumber"),C=xt(e),{mergedSizeRef:T,mergedDisabledRef:p,mergedStatusRef:O}=C,r=b(null),D=b(null),R=b(null),a=b(e.defaultValue),X=_t(e,"value"),S=Ct(X,a),I=b(""),U=t=>{const l=String(t).split(".")[1];return l?l.length:0},o=t=>{const l=[e.min,e.max,e.step,t].map(c=>c===void 0?0:U(c));return Math.max(...l)},g=W(()=>{const{placeholder:t}=e;return t!==void 0?t:v.value.placeholder}),y=W(()=>{const t=Ee(e.step);return t!==null?t===0?1:Math.abs(t):1}),M=W(()=>{const t=Ee(e.min);return t!==null?t:null}),E=W(()=>{const t=Ee(e.max);return t!==null?t:null}),L=t=>{const{value:l}=S;if(t===l){P();return}const{"onUpdate:value":c,onUpdateValue:x,onChange:V}=e,{nTriggerFormInput:$,nTriggerFormChange:J}=C;V&&Q(V,t),x&&Q(x,t),c&&Q(c,t),a.value=t,$(),J()},w=({offset:t,doUpdateIfValid:l,fixPrecision:c,isInputing:x})=>{const{value:V}=I;if(x&&dn(V))return!1;const $=(e.parse||un)(V);if($===null)return l&&L(null),null;if(Te($)){const J=U($),{precision:ue}=e;if(ue!==void 0&&ue<J&&!c)return!1;let j=parseFloat(($+t).toFixed(ue??o($)));if(Te(j)){const{value:we}=E,{value:Ne}=M;if(we!==null&&j>we){if(!l||x)return!1;j=we}if(Ne!==null&&j<Ne){if(!l||x)return!1;j=Ne}return e.validator&&!e.validator(j)?!1:(l&&L(j),j)}}return!1},P=()=>{const{value:t}=S;if(Te(t)){const{format:l,precision:c}=e;l?I.value=l(t):t===null||c===void 0||U(t)>c?I.value=Ue(t,void 0):I.value=Ue(t,c)}else I.value=String(t)};P();const oe=W(()=>w({offset:0,doUpdateIfValid:!1,isInputing:!1,fixPrecision:!1})===!1),H=W(()=>{const{value:t}=S;if(e.validator&&t===null)return!1;const{value:l}=y;return w({offset:-l,doUpdateIfValid:!1,isInputing:!1,fixPrecision:!1})!==!1}),Y=W(()=>{const{value:t}=S;if(e.validator&&t===null)return!1;const{value:l}=y;return w({offset:+l,doUpdateIfValid:!1,isInputing:!1,fixPrecision:!1})!==!1});function G(t){const{onFocus:l}=e,{nTriggerFormFocus:c}=C;l&&Q(l,t),c()}function u(t){var l,c;if(t.target===((l=r.value)===null||l===void 0?void 0:l.wrapperElRef))return;const x=w({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0});if(x!==!1){const J=(c=r.value)===null||c===void 0?void 0:c.inputElRef;J&&(J.value=String(x||"")),S.value===x&&P()}else P();const{onBlur:V}=e,{nTriggerFormBlur:$}=C;V&&Q(V,t),$(),Nt(()=>{P()})}function d(t){const{onClear:l}=e;l&&Q(l,t)}function F(){const{value:t}=Y;if(!t){Se();return}const{value:l}=S;if(l===null)e.validator||L(Z());else{const{value:c}=y;w({offset:c,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})}}function z(){const{value:t}=H;if(!t){Ce();return}const{value:l}=S;if(l===null)e.validator||L(Z());else{const{value:c}=y;w({offset:-c,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})}}const h=G,ce=u;function Z(){if(e.validator)return null;const{value:t}=M,{value:l}=E;return t!==null?Math.max(0,t):l!==null?Math.min(0,l):0}function qe(t){d(t),L(null)}function Xe(t){var l,c,x;!((l=R.value)===null||l===void 0)&&l.$el.contains(t.target)&&t.preventDefault(),!((c=D.value)===null||c===void 0)&&c.$el.contains(t.target)&&t.preventDefault(),(x=r.value)===null||x===void 0||x.activate()}let ie=null,se=null,fe=null;function Ce(){fe&&(window.clearTimeout(fe),fe=null),ie&&(window.clearInterval(ie),ie=null)}function Se(){me&&(window.clearTimeout(me),me=null),se&&(window.clearInterval(se),se=null)}function Ze(){Ce(),fe=window.setTimeout(()=>{ie=window.setInterval(()=>{z()},He)},je),Le("mouseup",document,Ce,{once:!0})}let me=null;function Je(){Se(),me=window.setTimeout(()=>{se=window.setInterval(()=>{F()},He)},je),Le("mouseup",document,Se,{once:!0})}const Qe=()=>{se||F()},et=()=>{ie||z()};function tt(t){var l,c;if(t.key==="Enter"){if(t.target===((l=r.value)===null||l===void 0?void 0:l.wrapperElRef))return;w({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})!==!1&&((c=r.value)===null||c===void 0||c.deactivate())}else if(t.key==="ArrowUp"){if(!Y.value||e.keyboard.ArrowUp===!1)return;t.preventDefault(),w({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})!==!1&&F()}else if(t.key==="ArrowDown"){if(!H.value||e.keyboard.ArrowDown===!1)return;t.preventDefault(),w({offset:0,doUpdateIfValid:!0,isInputing:!1,fixPrecision:!0})!==!1&&z()}}function nt(t){I.value=t,e.updateValueOnInput&&!e.format&&!e.parse&&e.precision===void 0&&w({offset:0,doUpdateIfValid:!0,isInputing:!0,fixPrecision:!1})}We(S,()=>{P()});const at={focus:()=>{var t;return(t=r.value)===null||t===void 0?void 0:t.focus()},blur:()=>{var t;return(t=r.value)===null||t===void 0?void 0:t.blur()},select:()=>{var t;return(t=r.value)===null||t===void 0?void 0:t.select()}},lt=St("InputNumber",N,k);return Object.assign(Object.assign({},at),{rtlEnabled:lt,inputInstRef:r,minusButtonInstRef:D,addButtonInstRef:R,mergedClsPrefix:k,mergedBordered:f,uncontrolledValue:a,mergedValue:S,mergedPlaceholder:g,displayedValueInvalid:oe,mergedSize:T,mergedDisabled:p,displayedValue:I,addable:Y,minusable:H,mergedStatus:O,handleFocus:h,handleBlur:ce,handleClear:qe,handleMouseDown:Xe,handleAddClick:Qe,handleMinusClick:et,handleAddMousedown:Je,handleMinusMousedown:Ze,handleKeyDown:tt,handleUpdateDisplayedValue:nt,mergedTheme:m,inputThemeOverrides:{paddingSmall:"0 8px 0 10px",paddingMedium:"0 8px 0 12px",paddingLarge:"0 8px 0 14px"},buttonThemeOverrides:ne(()=>{const{self:{iconColorDisabled:t}}=m.value,[l,c,x,V]=wt(t);return{textColorTextDisabled:`rgb(${l}, ${c}, ${x})`,opacityDisabled:`${V}`}})})},render(){const{mergedClsPrefix:e,$slots:f}=this,k=()=>_(Ae,{text:!0,disabled:!this.minusable||this.mergedDisabled||this.readonly,focusable:!1,theme:this.mergedTheme.peers.Button,themeOverrides:this.mergedTheme.peerOverrides.Button,builtinThemeOverrides:this.buttonThemeOverrides,onClick:this.handleMinusClick,onMousedown:this.handleMinusMousedown,ref:"minusButtonInstRef"},{icon:()=>De(f["minus-icon"],()=>[_(Ve,{clsPrefix:e},{default:()=>_(en,null)})])}),N=()=>_(Ae,{text:!0,disabled:!this.addable||this.mergedDisabled||this.readonly,focusable:!1,theme:this.mergedTheme.peers.Button,themeOverrides:this.mergedTheme.peerOverrides.Button,builtinThemeOverrides:this.buttonThemeOverrides,onClick:this.handleAddClick,onMousedown:this.handleAddMousedown,ref:"addButtonInstRef"},{icon:()=>De(f["add-icon"],()=>[_(Ve,{clsPrefix:e},{default:()=>_(Qt,null)})])});return _("div",{class:[`${e}-input-number`,this.rtlEnabled&&`${e}-input-number--rtl`]},_(ae,{ref:"inputInstRef",autofocus:this.autofocus,status:this.mergedStatus,bordered:this.mergedBordered,loading:this.loading,value:this.displayedValue,onUpdateValue:this.handleUpdateDisplayedValue,theme:this.mergedTheme.peers.Input,themeOverrides:this.mergedTheme.peerOverrides.Input,builtinThemeOverrides:this.inputThemeOverrides,size:this.mergedSize,placeholder:this.mergedPlaceholder,disabled:this.mergedDisabled,readonly:this.readonly,textDecoration:this.displayedValueInvalid?"line-through":void 0,onFocus:this.handleFocus,onBlur:this.handleBlur,onKeydown:this.handleKeyDown,onMousedown:this.handleMouseDown,onClear:this.handleClear,clearable:this.clearable,inputProps:this.inputProps,internalLoadingBeforeSuffix:!0},{prefix:()=>{var m;return this.showButton&&this.buttonPlacement==="both"?[k(),Oe(f.prefix,v=>v?_("span",{class:`${e}-input-number-prefix`},v):null)]:(m=f.prefix)===null||m===void 0?void 0:m.call(f)},suffix:()=>{var m;return this.showButton?[Oe(f.suffix,v=>v?_("span",{class:`${e}-input-number-suffix`},v):null),this.buttonPlacement==="right"?k():null,N()]:(m=f.suffix)===null||m===void 0?void 0:m.call(f)}}))}}),vn={class:"link-time-div"},gn={key:0},hn={key:0},pn=re({__name:"LinkListItem",props:{link:{},isChecked:{type:Boolean}},emits:["onSettingLink","onDeleteLink","onChecked","onUnChecked"],setup(e,{emit:f}){const k=e,N=f,m=Ie("globalVars"),v=b(!1),C=r=>{N("onSettingLink",r)},T=r=>{N("onDeleteLink",r)},p=()=>{v.value||(v.value=!0,setTimeout(()=>{v.value=!1},500))},O=r=>{N(r?"onChecked":"onUnChecked",k.link)};return(r,D)=>(B(),he(n(jt),null,{default:i(()=>[s(n(Ut),{class:"animate__animated animate__fadeIn"},{avatar:i(()=>[s(n(zt),{checked:r.isChecked,style:{"margin-left":"-4px","margin-right":"12px"},onUpdateChecked:O},null,8,["checked"]),s(n(Zt),{value:r.link.priority,class:Re(["animate__animated none-select",{animate__pulse:v.value}]),style:{"margin-right":"5px"}},{default:i(()=>[q("div",{onMouseenter:p},[r.link.logo!==null?(B(),he(n(ln),{key:0,class:"shadow",src:r.link.logo,circle:"",size:"large"},{fallback:i(()=>[q("div",{class:Re(["avatar-text-div shadow",{animate__pulse:v.value}])},[q("span",null,K(r.link.displayName[0]),1)],2)]),_:1},8,["src"])):(B(),le("div",{key:1,class:Re(["avatar-text-div shadow",{animate__pulse:v.value}])},[q("span",null,K(r.link.displayName[0]),1)],2))],32)]),_:1},8,["value","class"])]),header:i(()=>[s(n(Rt),{trigger:"hover"},{trigger:i(()=>[s(n(ke),{strong:"",style:{cursor:"default"}},{default:i(()=>[de(K(r.link.displayName),1)]),_:1})]),default:i(()=>[q("span",null,"备注："+K(r.link.remark??"无"),1)]),_:1})]),description:i(()=>[s(n(Tt),null,{default:i(()=>[s(n(Be),{span:n(m).isSmallWindow?24:18},{default:i(()=>[s(n(Ke),{vertical:"",size:"small",style:{"margin-top":"-8px"}},{default:i(()=>[s(n(pe),{text:"",tag:"a",href:r.link.url,target:"_blank",type:"primary"},{default:i(()=>[de(K(r.link.url),1)]),_:1},8,["href"]),s(n(ke),{depth:"3"},{default:i(()=>[de(K(r.link.description),1)]),_:1})]),_:1})]),_:1},8,["span"]),n(m).isSmallWindow?be("",!0):(B(),he(n(Be),{key:0,span:6},{default:i(()=>[q("div",vn,[s(n(ke),{class:"link-time-div-text",depth:"3",style:{"font-size":"0.9em"}},{default:i(()=>[de(K(n(Et)(r.link.createTime)),1)]),_:1})])]),_:1}))]),_:1})]),"header-extra":i(()=>[s(n($t),{size:"small"},{default:i(()=>[s(n(pe),{type:"default",tertiary:"",onClick:D[0]||(D[0]=R=>C(r.link))},{icon:i(()=>[s(n(Me),null,{default:i(()=>[s(n(Dt))]),_:1})]),default:i(()=>[n(m).isSmallWindow?be("",!0):(B(),le("span",gn,"设置"))]),_:1}),s(n(pe),{type:"error",tertiary:"",onClick:D[1]||(D[1]=R=>T(r.link))},{icon:i(()=>[s(n(Me),null,{default:i(()=>[s(n(Kt))]),_:1})]),default:i(()=>[n(m).isSmallWindow?be("",!0):(B(),le("span",hn,"删除"))]),_:1})]),_:1})]),_:1})]),_:1}))}}),bn=Ot(pn,[["__scopeId","data-v-9feed19e"]]);var A=(e=>(e.PRIORITY_DESC="PRIORITY_DESC",e.PRIORITY_ASC="PRIORITY_ASC",e.CREATE_TIME_DESC="CREATE_TIME_DESC",e.CREATE_TIME_ASC="CREATE_TIME_ASC",e.MODIFY_TIME_DESC="MODIFY_TIME_DESC",e.MODIFY_TIME_ASC="MODIFY_TIME_ASC",e))(A||{});function kn(e){return _e({url:"/admin/link",method:"POST",data:e})}function yn(e){return _e({url:"/admin/link",method:"DELETE",data:e})}function In(e){return _e({url:"/admin/link",method:"PUT",data:e})}function xn(e=0,f=0,k=A.PRIORITY_DESC){return _e({url:`/admin/link?page=${e}&size=${f}&sort=${k}`,method:"GET"})}const _n={class:"container"},Cn={key:0},On=re({__name:"LinkView",setup(e){const f=Ie("globalVars"),k=b(0),N=b(0),m=b(1),v=b(10),C=b(A.PRIORITY_DESC),T=b(null),p=b(Array()),O=b(null),r=b(!1),D=b(!1),R=b(te.ADD),a=Mt({linkId:-1,displayName:"",url:"",logo:"",description:"",priority:0,remark:"",createTime:0,lastModifyTime:null}),X=[{label:"优先级降序",value:A.PRIORITY_DESC},{label:"优先级升序",value:A.PRIORITY_ASC},{label:"创建时间降序",value:A.CREATE_TIME_DESC},{label:"创建时间升序",value:A.CREATE_TIME_ASC},{label:"修改时间降序",value:A.MODIFY_TIME_DESC},{label:"修改时间升序",value:A.MODIFY_TIME_ASC}];Ge(()=>{S(),I()});const S=()=>{v.value=Number(localStorage.getItem(Fe.LINK_PAGE_SIZE)??10)},I=()=>{window.$loadingBar.start(),xn(m.value,v.value,C.value??A.PRIORITY_DESC).then(u=>{window.$loadingBar.finish();let d=u.data;m.value=d.page,v.value=d.size,k.value=d.totalData,N.value=d.totalPages,T.value=d.data}).catch(u=>{window.$loadingBar.error(),ve(u)})},U=u=>{m.value=u,I()},o=u=>{v.value=u,localStorage.setItem(Fe.LINK_PAGE_SIZE,u.toString()),I()},g=()=>{w(),R.value=te.ADD,r.value=!0},y=u=>{ze(`确定要删除链接 [${u.displayName}] 吗？`,()=>{E([u.linkId])})},M=()=>{let u=Array();p.value.forEach(d=>{u.push(d)}),ze(`确定要删除选择的 ${u.length} 个链接吗？`,()=>{E(u)})},E=u=>{yn(u).then(()=>{p.value=p.value.filter(d=>!u.includes(d)),$e("删除成功"),I()}).catch(d=>ve(d))},L=u=>{w(),R.value=te.EDIT,a.linkId=u.linkId,a.displayName=u.displayName,a.url=u.url,a.logo=u.logo,a.description=u.description,a.priority=u.priority,a.remark=u.remark,r.value=!0},w=()=>{a.linkId=-1,a.displayName="",a.url="",a.logo="",a.description="",a.priority=0,a.remark="",a.createTime=0,a.lastModifyTime=null},P=()=>{var u;return(u=O.value)==null||u.validate(d=>{var F,z,h;if(!d){let ce={linkId:a.linkId,displayName:a.displayName,url:a.url,logo:((F=a.logo)==null?void 0:F.length)===0?null:a.logo,description:((z=a.description)==null?void 0:z.length)===0?null:a.description,priority:a.priority,remark:((h=a.remark)==null?void 0:h.length)===0?null:a.remark};R.value===te.ADD?kn(ce).then(()=>{r.value=!1,$e("添加成功"),I()}).catch(Z=>ve(Z)):In(ce).then(()=>{r.value=!1,Lt(),I()}).catch(Z=>ve(Z))}}),!1},oe=u=>{p.value.push(u.linkId)},H=u=>{p.value=p.value.filter(d=>d!==u.linkId)},Y=()=>{var u;p.value=[],(u=T.value)==null||u.forEach(d=>{p.value.push(d.linkId)})},G=()=>{p.value=[]};return(u,d)=>{var F,z;return B(),le("div",_n,[s(n(At),{show:r.value,"onUpdate:show":d[6]||(d[6]=h=>r.value=h),preset:"dialog",title:R.value==n(te).ADD?"添加链接":"链接设置","positive-text":R.value==n(te).ADD?"添加":"保存","negative-text":"取消",loading:D.value,onPositiveClick:P,onKeydown:Pt(P,["enter"])},{default:i(()=>[s(n(qt),{style:{"max-height":"55vh","padding-right":"12px"}},{default:i(()=>[s(n(Vt),{ref_key:"linkDialogRef",ref:O,class:"dialog-form",model:a,style:{margin:"10px 5px"}},{default:i(()=>[s(n(ee),{label:"链接名",path:"displayName",rule:{required:!0,message:"请输入链接名"}},{default:i(()=>[s(n(ae),{value:a.displayName,"onUpdate:value":d[0]||(d[0]=h=>a.displayName=h),placeholder:"链接名",maxlength:"100"},null,8,["value"])]),_:1}),s(n(ee),{label:"地址",path:"url",rule:{required:!0,message:"请输入链接地址"}},{default:i(()=>[s(n(ae),{value:a.url,"onUpdate:value":d[1]||(d[1]=h=>a.url=h),placeholder:"链接地址",maxlength:"256"},null,8,["value"])]),_:1}),s(n(ee),{label:"Logo",path:"logo"},{default:i(()=>[s(n(ae),{value:a.logo,"onUpdate:value":d[2]||(d[2]=h=>a.logo=h),placeholder:"链接 LOGO",maxlength:"256"},null,8,["value"])]),_:1}),s(n(ee),{label:"描述",path:"description"},{default:i(()=>[s(n(ae),{type:"textarea",value:a.description,"onUpdate:value":d[3]||(d[3]=h=>a.description=h),placeholder:"链接描述",maxlength:"400"},null,8,["value"])]),_:1}),s(n(Jt),null,{default:i(()=>[s(n(ke),{depth:"3",style:{"font-size":"0.9em"}},{default:i(()=>[de("进阶设置")]),_:1})]),_:1}),s(n(ee),{label:"优先级（0 - 100）",path:"priority"},{default:i(()=>[s(n(mn),{style:{width:"100%"},value:a.priority,"onUpdate:value":d[4]||(d[4]=h=>a.priority=h),placeholder:"链接优先级（0 - 100）默认 0",clearable:"",max:100,min:0},null,8,["value"])]),_:1}),s(n(ee),{label:"备注（仅后台可见）",path:"remark"},{default:i(()=>[s(n(ae),{value:a.remark,"onUpdate:value":d[5]||(d[5]=h=>a.remark=h),placeholder:"链接备注",maxlength:"128"},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1},8,["show","title","positive-text","loading"]),s(Ht,{"data-count":k.value,"show-empty-status":T.value!==null&&T.value.length===0,"current-page":m.value,"page-size":v.value,"page-count":N.value,"current-page-item-count":((F=T.value)==null?void 0:F.length)??0,"is-checked":p.value.length===((z=T.value)==null?void 0:z.length)&&T.value.length!==0,"show-pagination":"","show-checkbox":"","show-delete-button":p.value.length>0,"item-string":"链接",onOnPageUpdate:U,onOnPageSizeUpdate:o,onOnChecked:Y,onOnCheckboxCancel:G,onOnDeleteButtonClick:M},{"header-extra":i(()=>[s(n(Ke),null,{default:i(()=>[s(n(Xt),{options:X,value:C.value,"onUpdate:value":[d[7]||(d[7]=h=>C.value=h),I],placeholder:"排序方式",style:{width:"130px"}},null,8,["value"]),s(n(pe),{type:"primary",onClick:g},{icon:i(()=>[s(n(Me),null,{default:i(()=>[s(n(Yt))]),_:1})]),default:i(()=>[n(f).isSmallWindow?be("",!0):(B(),le("span",Cn,"添加链接"))]),_:1})]),_:1})]),content:i(()=>[q("div",null,[s(n(Gt),{hoverable:""},{default:i(()=>[(B(!0),le(Bt,null,Ft(T.value,h=>(B(),he(bn,{key:h.linkId,link:h,"is-checked":p.value.includes(h.linkId),onOnDeleteLink:y,onOnSettingLink:L,onOnChecked:oe,onOnUnChecked:H},null,8,["link","is-checked"]))),128))]),_:1})])]),_:1},8,["data-count","show-empty-status","current-page","page-size","page-count","current-page-item-count","is-checked","show-delete-button"])])}}});export{On as default};
